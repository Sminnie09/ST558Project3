library(shiny)
library(plotly)

source("global.R")

shinyUI(fluidPage(

    # Application title
    #titlePanel("Final Project"),
    
    # Tabs
        navbarPage("ST558 Final Project",
                    tabPanel("Information"),
                    tabPanel("Data", fluid = TRUE,
                             sidebarLayout(
                               sidebarPanel(
                                    h3("View Datasets"),
                                    selectInput("station", "Select a city", selected = 'Select a city', 
                                                              choices = c("Select a city","Aotizhongxin", "Changping", "Dingling")),
                                                  selectInput("year", "Select a year", selected = "Select a year", 
                                                              choices = c("Select a year","2013", "2014", "2015", "2016", "2017"))
                               ),
                               mainPanel(
                                 DT::dataTableOutput("table"), downloadButton("download1","Download as csv"))
                               )
                             ),
                    navbarMenu("Data Exploration",
                               tabPanel("Graphical Summaries", fluid = TRUE,
                                       sidebarLayout(
                                         sidebarPanel(
                                           h3("Graphical Summaries"),
                                           selectInput("stationPlot", "Select a city", selected = 'Aotizhongxin', 
                                                       choices = c("Aotizhongxin", "Changping", "Dingling")),
                                           selectInput("yearPlot", "Select a year", selected = "2013", 
                                                       choices = c("2013", "2014", "2015", "2016", "2017")),
                                           selectInput("plot", "Plot Type", selected = 'Boxplot', 
                                                       choices = c("Boxplot", "Histogram")),
                                           conditionalPanel(condition = "input.plot == 'Boxplot'",
                                                            #downloadButton("downloadBox","Download as png")
                                           ),
                                           conditionalPanel(condition = "input.plot == 'Histogram'",
                                                            selectInput("pollutant", "Select a Pollutant", selected = "PM2.5", 
                                                                        choices = c("PM2.5", "PM10","SO2","NO2","CO","O3")),
                                                            sliderInput("bins", label = "Number of Bins", value = 10, min = 1,
                                                                        max = 50),
                                                            downloadButton("downloadHist","Download as png")
                                           )
                                         ),
                                         mainPanel(
                                           plotOutput("plot")
                                         )
                                       ) 
                                  ),
                               tabPanel("Numerical Summaries", fluid = TRUE,
                                 sidebarLayout(
                                   sidebarPanel(
                                     h3("Numerical Summaries"),
                                     selectInput("stationSum", "Select a city", selected = 'Aotizhongxin', 
                                                 choices = c("Aotizhongxin", "Changping", "Dingling")),
                                     selectInput("yearSum", "Select a year", selected = "2013", 
                                                 choices = c("2013", "2014", "2015", "2016", "2017")),
                                     numericInput("obs", "Number of Observations to view", value = 10),
                                     textOutput("text")
                                   ),
                                   mainPanel(
                                     verbatimTextOutput("numSummary"),
                                      tableOutput("view")
                                   )
                                 )
                               )
                            ),
                    tabPanel("Principal Component Analysis"),
                    tabPanel("Regression", fluid = TRUE,
                             sidebarLayout(
                                 sidebarPanel(
                                    h3("Regression Analysis"),
                                    selectInput("stationReg", "Select a city", selected = 'Aotizhongxin', 
                                               choices = c("Aotizhongxin", "Changping", "Dingling")),
                                    selectInput("yearReg", "Select a year", selected = "2013", 
                                                choices = c("2013", "2014", "2015", "2016", "2017")),
                                     selectInput("xcol", "Explanatory Variable (x)", selected = "PM2.5",
                                                 choices = c("PM2.5", "PM10","SO2","NO2","CO","O3","TEMP", "PRES", "DEWP", "WSPM")),
                                     selectInput("ycol", "Response Variable", selected = "O3",
                                                choices = c("O3", "SO2", "NO2", "PM2.5")),
                                     sliderInput("month", label = "Month", value = 6, min = 1,
                                                 max = 12),
                                     checkboxInput("regEqu", h4("Fit Regression Equation?"), FALSE)
                                     ),
                                 mainPanel(
                                     plotlyOutput("regression"),

                                                       verbatimTextOutput("regressionEqu"),
                                                       tableOutput("regTable")
                                 ),
                             ),
                             ),
                    tabPanel("Random Forest Model", fluid = TRUE,
                             sidebarLayout(
                               sidebarPanel(
                                 h3("Choose Parameters"),
                                 selectInput("stationRF", "Select a city", selected = 'Aotizhongxin', 
                                             choices = c("Aotizhongxin", "Changping", "Dingling")),
                                 selectInput("yearRF", "Select a year", selected = "2013", 
                                             choices = c("2013", "2014", "2015", "2016", "2017")),
                                 #uiOutput("varsRF")
                                 selectInput("vars1", "Select one outcome variable:", choices = c("PM2.5", "PM10","SO2","NO2","CO","O3","TEMP", "PRES", "DEWP", "WSPM"), selected = NULL, multiple = FALSE),
                                 radioButtons("explvars", "Choose explanatory variables:",
                                              list("All" = "all", "Select explanatory variables" = "select"), selected = "all"),
                                    conditionalPanel(condition = "input.explvars == 'select'",
                                            selectInput("vars2", "Select the explanatory variables:", choices = c("PM2.5", "PM10","SO2","NO2","CO","O3","TEMP", "PRES", "DEWP", "WSPM"), selected = NULL, multiple=TRUE)          
                                                     )


                                 
                               ),
                               mainPanel(
                                 
                               )
                             )
                             )
                
        )
    )
)



